!function(e,t){"use strict";"function"==typeof define&&define.amd?define(["jquery"],function($){return t($,e,e.document)}):"object"==typeof module&&module.exports?module.exports=t(require("jquery"),e,e.document):t(jQuery,e,e.document)}("undefined"!=typeof window?window:this,function($,e,t,o){"use strict";function n(t,o,n,i){if(l===t&&(n=!1),M===!0)return!0;if(a[t]){if(y=!1,n&&k.before(t,c),d=1,N=s[t],D===!1&&l>t&&i===!1&&u[t]&&(d=parseInt(c[t].outerHeight()/m.height()),N=parseInt(s[t])+(c[t].outerHeight()-m.height())),k.updateHash&&k.sectionName&&(D!==!0||0!==t))if(history.pushState)try{history.replaceState(null,null,a[t])}catch(t){e.console&&console.warn("Scrollify warning: Page must be hosted to manipulate the hash value.")}else e.location.hash=a[t];if(D&&(k.afterRender(),D=!1),l=t,o)$(k.target).stop().scrollTop(N),n&&k.after(t,c);else{if(w=!0,$().velocity?$(k.target).stop().velocity("scroll",{duration:k.scrollSpeed,easing:k.easing,offset:N,mobileHA:!1}):$(k.target).stop().animate({scrollTop:N},k.scrollSpeed,k.easing),e.location.hash.length&&k.sectionName&&e.console)try{$(e.location.hash).length&&console.warn("Scrollify warning: ID matches hash value - this will cause the page to anchor.")}catch(e){}$(k.target).promise().done(function(){w=!1,D=!1,n&&k.after(t,c)})}}}function i(e){function t(t){for(var o=0,n=e.slice(Math.max(e.length-t,1)),i=0;i<n.length;i++)o+=n[i];return Math.ceil(o/t)}var o=t(10),n=t(70);return o>=n}function r(e,t){for(var o=a.length;o>=0;o--)"string"==typeof e?a[o]===e&&(h=o,n(o,t,!0,!0)):o===e&&(h=o,n(o,t,!0,!0))}var s=[],a=[],c=[],u=[],h=0,l=0,d=1,f=!1,p,g,m=$(e),v=m.scrollTop(),y=!1,w=!1,S=!1,b,H,E,M=!1,x=[],T=(new Date).getTime(),D=!0,I=!1,N=0,L="onwheel"in t?"wheel":t.onmousewheel!==o?"mousewheel":"DOMMouseScroll",k={section:".section",sectionName:"section-name",interstitialSection:"",easing:"easeOutExpo",scrollSpeed:1100,offset:0,scrollbars:!0,target:"html,body",standardScrollElements:!1,setHeights:!0,overflowScroll:!0,updateHash:!0,touchScroll:!0,before:function(){},after:function(){},afterResize:function(){},afterRender:function(){}},z=function(o){function r(e){$().velocity?$(k.target).stop().velocity("scroll",{duration:k.scrollSpeed,easing:k.easing,offset:e,mobileHA:!1}):$(k.target).stop().animate({scrollTop:e},k.scrollSpeed,k.easing)}function l(){var e=k.section;u=[],k.interstitialSection.length&&(e+=","+k.interstitialSection),k.scrollbars===!1&&(k.overflowScroll=!1),$(e).each(function(e){var t=$(this);k.setHeights?t.is(k.interstitialSection)?u[e]=!1:t.css("height","auto").outerHeight()<m.height()||"hidden"===t.css("overflow")?(t.css({height:m.height()}),u[e]=!1):(t.css({height:t.height()}),k.overflowScroll?u[e]=!0:u[e]=!1):t.outerHeight()<m.height()||k.overflowScroll===!1?u[e]=!1:u[e]=!0})}function D(t,o){var i=k.section;k.interstitialSection.length&&(i+=","+k.interstitialSection),s=[],a=[],c=[],$(i).each(function(t){var o=$(this);t>0?s[t]=parseInt(o.offset().top)+k.offset:s[t]=parseInt(o.offset().top),k.sectionName&&o.data(k.sectionName)?a[t]="#"+o.data(k.sectionName).toString().replace(/ /g,"-"):o.is(k.interstitialSection)===!1?a[t]="#"+(t+1):(a[t]="#",t===$(i).length-1&&t>1&&(s[t]=s[t-1]+parseInt(o.height()))),c[t]=o;try{$(a[t]).length&&e.console&&console.warn("Scrollify warning: Section names can't match IDs - this will cause the browser to anchor.")}catch(e){}e.location.hash===a[t]&&(h=t,f=!0)}),!0===t&&n(h,!1,!1,!1)}function N(){return!u[h]||(v=m.scrollTop(),!(v>parseInt(s[h])))}function z(){return!u[h]||(v=m.scrollTop(),!(v<parseInt(s[h])+(c[h].outerHeight()-m.height())-28))}I=!0,$.easing.easeOutExpo=function(e,t,o,n,i){return t==i?o+n:n*(-Math.pow(2,-10*t/i)+1)+o},b={handleMousedown:function(){return M===!0||(y=!1,void(S=!1))},handleMouseup:function(){return M===!0||(y=!0,void(S&&b.calculateNearest(!1,!0)))},handleScroll:function(){return M===!0||(p&&clearTimeout(p),void(p=setTimeout(function(){return S=!0,y!==!1&&(y=!1,void b.calculateNearest(!1,!0))},200)))},calculateNearest:function(e,t){v=m.scrollTop();for(var o=1,i=s.length,r=0,a=Math.abs(s[0]-v),c;o<i;o++)c=Math.abs(s[o]-v),c<a&&(a=c,r=o);(z()||N())&&(h=r,n(r,e,t,!1))},wheelHandler:function(t){if(M===!0)return!0;if(k.standardScrollElements&&($(t.target).is(k.standardScrollElements)||$(t.target).closest(k.standardScrollElements).length))return!0;u[h]||t.preventDefault();var o=(new Date).getTime();t=t||e.event;var r=t.originalEvent.wheelDelta||-t.originalEvent.deltaY||-t.originalEvent.detail,a=Math.max(-1,Math.min(1,r));if(x.length>149&&x.shift(),x.push(Math.abs(r)),o-T>200&&(x=[]),T=o,w)return!1;if(a<0){if(h<s.length-1&&z()){if(!i(x))return!1;t.preventDefault(),h++,w=!0,n(h,!1,!0,!1)}}else if(a>0&&h>0&&N()){if(!i(x))return!1;t.preventDefault(),h--,w=!0,n(h,!1,!0,!1)}},keyHandler:function(e){return M===!0||w!==!0&&void(38==e.keyCode?h>0&&N()&&(e.preventDefault(),h--,n(h,!1,!0,!1)):40!=e.keyCode&&32!=e.keyCode||h<s.length-1&&z()&&(e.preventDefault(),h++,n(h,!1,!0,!1)))},init:function(){k.scrollbars?(m.on("mousedown",b.handleMousedown),m.on("mouseup",b.handleMouseup),m.on("scroll",b.handleScroll)):$("body").css({overflow:"hidden"}),m.on(L,b.wheelHandler),m.on("keydown",b.keyHandler)}},H={touches:{touchstart:{y:-1,x:-1},touchmove:{y:-1,x:-1},touchend:!1,direction:"undetermined"},options:{distance:30,timeGap:800,timeStamp:(new Date).getTime()},touchHandler:function(e){if(M===!0)return!0;if(k.standardScrollElements&&($(e.target).is(k.standardScrollElements)||$(e.target).closest(k.standardScrollElements).length))return!0;var t;if("undefined"!=typeof e&&"undefined"!=typeof e.touches)switch(t=e.touches[0],e.type){case"touchstart":H.touches.touchstart.y=t.pageY,H.touches.touchmove.y=-1,H.touches.touchstart.x=t.pageX,H.touches.touchmove.x=-1,H.options.timeStamp=(new Date).getTime(),H.touches.touchend=!1;case"touchmove":H.touches.touchmove.y=t.pageY,H.touches.touchmove.x=t.pageX,H.touches.touchstart.y!==H.touches.touchmove.y&&Math.abs(H.touches.touchstart.y-H.touches.touchmove.y)>Math.abs(H.touches.touchstart.x-H.touches.touchmove.x)&&(e.preventDefault(),H.touches.direction="y",H.options.timeStamp+H.options.timeGap<(new Date).getTime()&&0==H.touches.touchend&&(H.touches.touchend=!0,H.touches.touchstart.y>-1&&Math.abs(H.touches.touchmove.y-H.touches.touchstart.y)>H.options.distance&&(H.touches.touchstart.y<H.touches.touchmove.y?H.up():H.down())));break;case"touchend":H.touches[e.type]===!1&&(H.touches[e.type]=!0,H.touches.touchstart.y>-1&&H.touches.touchmove.y>-1&&"y"===H.touches.direction&&(Math.abs(H.touches.touchmove.y-H.touches.touchstart.y)>H.options.distance&&(H.touches.touchstart.y<H.touches.touchmove.y?H.up():H.down()),H.touches.touchstart.y=-1,H.touches.touchstart.x=-1,H.touches.direction="undetermined"))}},down:function(){h<=s.length-1&&(z()&&h<s.length-1?(h++,n(h,!1,!0,!1)):Math.floor(c[h].height()/m.height())>d?(r(parseInt(s[h])+m.height()*d),d+=1):r(parseInt(s[h])+(c[h].height()-m.height())))},up:function(){h>=0&&(N()&&h>0?(h--,n(h,!1,!0,!1)):d>2?(d-=1,r(parseInt(s[h])+m.height()*d)):(d=1,r(parseInt(s[h]))))},init:function(){t.addEventListener&&k.touchScroll&&(t.addEventListener("touchstart",H.touchHandler,!1),t.addEventListener("touchmove",H.touchHandler,!1),t.addEventListener("touchend",H.touchHandler,!1))}},E={refresh:function(e,t){clearTimeout(g),g=setTimeout(function(){l(),D(t,!1),e&&k.afterResize()},400)},handleUpdate:function(){E.refresh(!1,!0)},handleResize:function(){E.refresh(!0,!1)},handleOrientation:function(){E.refresh(!0,!0)}},k=$.extend(k,o),l(),D(!1,!0),!0===f?n(h,!1,!0,!0):setTimeout(function(){b.calculateNearest(!0,!1)},200),s.length&&(b.init(),H.init(),m.on("resize",E.handleResize),t.addEventListener&&e.addEventListener("orientationchange",E.handleOrientation,!1))};return z.move=function(e){return e!==o&&(e.originalEvent&&(e=$(this).attr("href")),void r(e,!1))},z.instantMove=function(e){return e!==o&&void r(e,!0)},z.next=function(){h<a.length&&(h+=1,n(h,!1,!0,!0))},z.previous=function(){h>0&&(h-=1,n(h,!1,!0,!0))},z.instantNext=function(){h<a.length&&(h+=1,n(h,!0,!0,!0))},z.instantPrevious=function(){h>0&&(h-=1,n(h,!0,!0,!0))},z.destroy=function(){return!!I&&(k.setHeights&&$(k.section).each(function(){$(this).css("height","auto")}),m.off("resize",E.handleResize),k.scrollbars&&(m.off("mousedown",b.handleMousedown),m.off("mouseup",b.handleMouseup),m.off("scroll",b.handleScroll)),m.off(L,b.wheelHandler),m.off("keydown",b.keyHandler),t.addEventListener&&k.touchScroll&&(t.removeEventListener("touchstart",H.touchHandler,!1),t.removeEventListener("touchmove",H.touchHandler,!1),t.removeEventListener("touchend",H.touchHandler,!1)),s=[],a=[],c=[],void(u=[]))},z.update=function(){return!!I&&void E.handleUpdate()},z.current=function(){return c[h]},z.disable=function(){M=!0},z.enable=function(){M=!1,I&&b.calculateNearest(!1,!1)},z.isDisabled=function(){return M},z.setOptions=function(t){return!!I&&void("object"==typeof t?(k=$.extend(k,t),E.handleUpdate()):e.console&&console.warn("Scrollify warning: setOptions expects an object."))},$.scrollify=z,z});