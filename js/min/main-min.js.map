{"version":3,"sources":["../main.js"],"names":["nine","canScroll","duration","scrollContainer","document","getElementById","scrollStart","pages","querySelectorAll","currentPage","scrollDirection","scrollSpy","sections","i","Array","prototype","forEach","call","el","classes","className","replace","trim","top","offsetTop","addEventListener","event","scrollPosition","documentElement","scrollTop","includes","changeHeaderClass","querySelector","setAttribute","animateLoad","body","window","setTimeout","hidden","classList","remove","scrollTo","startLocation","endLocation","stopAnimationIfRequired","pos","cancelAnimationFrame","runAnimation","finishedScroll","distance","timeLapsed","percentage","position","easing","progress","animate","requestAnimationFrame","setFixed","scrollHandler","pageId","page","pageStart","timeout","console","log","preventDefault","pageHeight","scrollHeight","pageStopPortion","viewHeight","innerHeight","viewEnd","pageStartPart","pageEndPart","canJumpDown","stopJumpDown","canJumpUp","stopJumpUp","scrollingForward","deltaY","scrollToPage","pageID","keyboardNav","onkeydown","code","keyCode","charCode","prevPage","nextPage","length","id","updateControls","controls","appendChild","createElement","add","onload"],"mappings":"YAAA,IAAIA,OACFC,WAAW,EACXC,SAAU,IACVC,gBAAiBC,SAASC,eAAe,UACzCC,YAAa,EACbC,MAAOH,SAASI,iBAAiB,YACjCC,YAAa,EACbC,gBAAiB,KAOnBV,MAAKW,UAAY,WACf,GAAIC,MACAC,EAAI,CAERC,OAAMC,UAAUC,QAAQC,KAAKjB,KAAKO,MAAO,SAASW,EAAIL,GACpDD,EAASC,IACPM,QAASD,EAAGE,UAAUC,QAAQ,UAAW,IAAIC,OAC7CC,IAAKL,EAAGM,UAAY,MAKxBxB,KAAKG,gBAAgBsB,iBAAiB,SAAU,SAASC,GAEvD,GAAIC,GAAiBvB,SAASwB,gBAAgBC,WAAa7B,KAAKG,gBAAgB0B,SAEhF,KAAKhB,IAAKD,GACJA,EAASC,GAAGU,KAAOI,IAKjBf,EAASC,GAAGM,QAAQW,SAAS,SAC/B9B,KAAK+B,kBAAkB,QAEvB/B,KAAK+B,kBAAkB,aAWjC/B,KAAK+B,kBAAoB,SAACX,GACxBhB,SAAS4B,cAAc,WAAWC,aAAa,QAA/C,UAAkEb,IAOpEpB,KAAKkC,YAAc,WACjB9B,SAAS+B,KAAKf,UAAY,GAE1BgB,OAAOC,WAAW,WAChB,GAAIC,GAASlC,SAASI,iBAAiB,aACvCM,OAAMC,UAAUC,QAAQC,KAAKqB,EAAQ,SAASpB,EAAIL,GAChDK,EAAGqB,UAAUC,OAAO,cAGtB,IAAIF,GAASlC,SAASI,iBAAiB,aACvCM,OAAMC,UAAUC,QAAQC,KAAKqB,EAAQ,SAASpB,EAAIL,GAChDK,EAAGqB,UAAUC,OAAO,gBAErB,MAOLxC,KAAKyC,SAAW,SAACC,EAAeC,GAkB9B,QAASC,GAAwBC,GAC5BA,GAAOF,IACTG,qBAAqBC,GACrB/C,KAAKC,WAAY,EACjBD,KAAKgD,kBArBRhD,KAAKC,WAAY,CAKjB,IAAIgD,GAAWN,EAAcD,EAEzBK,EAGAG,EAAa,EACbC,EAAYC,EAEZC,EAAS,QAATA,GAAmBC,GACtB,MAAOA,GAAW,GAAM,EAAIA,EAAWA,EAAWA,GAAYA,EAAW,IAAM,EAAIA,EAAW,IAAM,EAAIA,EAAW,GAAK,GAWrHC,EAAU,QAAVA,KACHL,GAAc,GACdC,EAAaD,EAAalD,KAAKE,SAC3BiD,EAAa,GACfA,EAAa,EACbC,EAAWT,GAEXS,EAAWV,EAAgBO,EAAWI,EAAOF,GAE/CnD,KAAKG,gBAAgB0B,UAAYuB,EACjCL,EAAeS,sBAAsBD,GACrCX,EAAwBQ,GAIzBL,GAAeS,sBAAsBD,IAOvCvD,KAAKgD,eAAiB,WACpBhD,KAAKyD,YAQPzD,KAAK0D,cAAgB,SAASC,GAC5B,GAAIC,GAAOxD,SAASC,eAAesD,GAC/BE,EAAYD,EAAKpC,SACrBxB,MAAKC,WAAY,CACjB,IAAI6D,GAAU,IAEd1B,QAAOX,iBAAiB,QAAS,SAASC,GAKxC,GAJA1B,KAAKM,YAAcN,KAAKG,gBAAgB0B,UAExCkC,QAAQC,IAAIhE,KAAKM,aAED,OAAZwD,EAGA,MAFAC,SAAQC,IAAI,sBACZtC,EAAMuC,kBACC,CAGX,IAAIjE,KAAKC,UAAW,CAClB6D,EAAUzB,WAAW,WAAYyB,EAAU,MAAyB,IAAhB9D,KAAKE,SAEzD,IAAIgE,GAAaN,EAAKO,aAClBC,EAAkBF,EAAa,EAC/BG,EAAajC,OAAOkC,YAEpBC,EAAUvE,KAAKM,YAAc+D,EAC7BG,EAAgBD,EAAUV,EAC1BY,EAAeZ,EAAYK,EAAclE,KAAKM,YAE9CoE,EAAcF,GAAiB,EAC/BG,EAAeH,EAAgBJ,EAE/BQ,EAAYH,GAAe,EAC3BI,EAAaJ,EAAcL,EAE3BU,EAAmBpD,EAAMqD,OAAS,GAE9BD,GAAoBJ,IAAgBC,IACpCG,GAAoBF,IAAgBC,KAC1CnD,EAAMuC,iBACNjE,KAAKyC,SAASzC,KAAKM,YAAauD,QAGnCnC,GAAMuC,oBASXjE,KAAKgF,aAAe,SAACC,GAEnBjF,KAAKM,YAAcN,KAAKG,gBAAgB0B,SACxC,IAAIgC,GAAYzD,SAASC,eAAe4E,GAAQzD,SAChDxB,MAAKyC,SAASzC,KAAKM,YAAauD,IAOlC7D,KAAKkF,YAAc,WACjBnB,QAAQC,IAAI,QAEZ5D,SAAS+E,UAAY,SAASzD,GACvBA,IACHA,EAAQU,OAAOV,MAGjB,IAAI0D,GAAO1D,EAAM2D,OAMjB,QAJI3D,EAAM4D,UAAoB,GAARF,IACpBA,EAAO1D,EAAM4D,UAGRF,GACL,IAAK,IACH1D,EAAMuC,iBACNjE,KAAKuF,UACL,MACF,KAAK,IACH7D,EAAMuC,iBACNjE,KAAKwF,UACP,UAWNxF,KAAKwF,SAAW,WACd,GAAIxF,KAAKS,YAAc,EAAIT,KAAKO,MAAMkF,OAAQ,CAC5CzF,KAAKU,gBAAkB,MAGvB,IAAI8E,GAAWxF,KAAKO,MAAMP,KAAKS,YAAc,GAAGiF,EAMhD,OALA1F,MAAKS,aAAe,EAGpBT,KAAKgF,aAAaQ,GAClBxF,KAAK2F,kBACE,EAET,OAAO,GAOT3F,KAAKuF,SAAW,WACd,GAAIvF,KAAKS,YAAc,GAAK,EAAG,CAC7BT,KAAKU,gBAAkB,KAEvBV,KAAKO,MAAMP,KAAKS,aAAa8B,UAAUC,OAAO,QAG9C,IAAI+C,GAAWvF,KAAKO,MAAMP,KAAKS,YAAc,GAAGiF,EAKhD,OAJA1F,MAAKS,aAAe,EAEpBT,KAAKgF,aAAaO,GAClBvF,KAAK2F,kBACE,EAET,OAAO,GAOT3F,KAAK4F,SAAW,WACd9E,MAAMC,UAAUC,QAAQC,KAAKjB,KAAKO,MAAO,SAASW,GAChDd,SAAS4B,cAAc,SAAS6D,YAAYzF,SAAS0F,cAAc,SAGrE1F,SAAS4B,cAAc,YAAYO,UAAUwD,IAAI,UAEjD3F,SAAS4B,cAAc,SAASP,iBAAiB,QAAS,WAAA,MAAMzB,MAAKwF,aACrEpF,SAAS4B,cAAc,SAASP,iBAAiB,QAAS,WAAA,MAAMzB,MAAKuF,aAErEvF,KAAK2F,kBAGP3F,KAAK2F,eAAiB,WACpBvF,SAAS4B,cAAc,mBAAmBO,UAAUC,OAAO,UAC3DpC,SAASI,iBAAiB,YAAYR,KAAKS,aAAa8B,UAAUwD,IAAI,UAEtE3F,SAAS4B,cAAc,SAASO,UAAUC,OAAO,YACjDpC,SAAS4B,cAAc,SAASO,UAAUC,OAAO,YAEzB,GAApBxC,KAAKS,aACPL,SAAS4B,cAAc,SAASO,UAAUwD,IAAI,YAG5C/F,KAAKS,aAAeT,KAAKO,MAAMkF,OAAS,GAC1CrF,SAAS4B,cAAc,SAASO,UAAUwD,IAAI,aASlD3F,SAASqB,iBAAiB,mBAAoB,WAC5CzB,KAAKW,YAOLX,KAAKkF,cACLlF,KAAK4F,UAGL,IAAI/E,GAAI,CAERC,OAAMC,UAAUC,QAAQC,KAAKjB,KAAKO,MAAO,SAASW,EAAIL,MAKtDb,KAAKyD,aAGPzD,KAAKyD,SAAW,aAkChBrB,OAAO4D,OAAS,WACdhG,KAAKkC","file":"main-min.js","sourcesContent":["var nine = {\n  canScroll: true,\n  duration: 1000,\n  scrollContainer: document.getElementById('scroll'),\n  scrollStart: 0,\n  pages: document.querySelectorAll(\".section\"),\n  currentPage: 0,\n  scrollDirection: null,\n};\n\n/* ==========================================================================\n  nine.scrollSpy()\n========================================================================== */\n\nnine.scrollSpy = () => {\n  var sections = {};\n  var i = 0;\n\n  Array.prototype.forEach.call(nine.pages, function(el, i) {\n    sections[i] = {\n      classes: el.className.replace('section', '').trim(),\n      top: el.offsetTop - 50,\n    }\n  });\n\n\n  nine.scrollContainer.addEventListener('scroll', function(event) {\n\n    var scrollPosition = document.documentElement.scrollTop || nine.scrollContainer.scrollTop;\n\n    for (i in sections) {\n      if (sections[i].top <= scrollPosition) {\n\n        // nine.currentPage = i;\n        // nine.updateControls();\n\n        if (sections[i].classes.includes('light')) {\n          nine.changeHeaderClass('dark');\n        } else {\n          nine.changeHeaderClass('light');\n        }\n      }\n    }\n  });\n};\n\n/* ==========================================================================\n  nine.chnageHeaderClass\n   ========================================================================== */\n\nnine.changeHeaderClass = (className) => {\n  document.querySelector('.header').setAttribute('class', `header ${className}`);\n};\n\n/* ==========================================================================\n  nine.animatation()\n   ========================================================================== */\n\nnine.animateLoad = () => {\n  document.body.className = '';\n\n  window.setTimeout(() => {\n    var hidden = document.querySelectorAll(\".hide-left\");\n    Array.prototype.forEach.call(hidden, function(el, i) {\n      el.classList.remove('hide-left');\n    });\n\n    var hidden = document.querySelectorAll(\".hide-down\");\n    Array.prototype.forEach.call(hidden, function(el, i) {\n      el.classList.remove('hide-down');\n    });\n  }, 1000)\n};\n\n/* ==========================================================================\n  nine.scrollTo()\n  ========================================================================== */\n\nnine.scrollTo = (startLocation, endLocation) => {\n  nine.canScroll = false;\n\n  // Calculate how far to scroll\n  // var startLocation = viewStart;\n  // var endLocation = pageStart;\n  var distance = endLocation - startLocation;\n\n  var runAnimation;\n\n  // Set the animation variables to 0/undefined.\n  var timeLapsed = 0;\n  var percentage, position;\n\n  var easing = function (progress) {\n   return progress < 0.5 ? 4 * progress * progress * progress : (progress - 1) * (2 * progress - 2) * (2 * progress - 2) + 1; // acceleration until halfway, then deceleration\n  };\n\n  function stopAnimationIfRequired(pos) {\n   if (pos == endLocation) {\n     cancelAnimationFrame(runAnimation);\n     nine.canScroll = true;\n     nine.finishedScroll();\n   }\n  }\n\n  var animate = function () {\n   timeLapsed += 16;\n   percentage = timeLapsed / nine.duration;\n   if (percentage > 1) {\n     percentage = 1;\n     position = endLocation;\n   } else {\n     position = startLocation + distance * easing(percentage);\n   }\n   nine.scrollContainer.scrollTop = position;\n   runAnimation = requestAnimationFrame(animate);\n   stopAnimationIfRequired(position);\n  };\n\n  // Loop the animation function\n  runAnimation = requestAnimationFrame(animate);\n}\n\n/* ==========================================================================\n  nine.finishedScroll\n   ========================================================================== */\n\nnine.finishedScroll = () => {\n  nine.setFixed();\n}\n\n/* ==========================================================================\n  nine.scrollHandler()\n  ========================================================================== */\n\n// Constructor cannot be ES6 arrow\nnine.scrollHandler = function(pageId) {\n  var page = document.getElementById(pageId);\n  var pageStart = page.offsetTop;\n  nine.canScroll = true;\n  var timeout = null;\n\n  window.addEventListener('wheel', function(event) {\n    nine.scrollStart = nine.scrollContainer.scrollTop;\n\n    console.log(nine.scrollStart);\n\n    if (timeout !== null) {\n        console.log('timout in progress');\n        event.preventDefault();\n        return false;\n    }\n\n    if (nine.canScroll) {\n      timeout = setTimeout(function(){ timeout = null; }, nine.duration * 1.5);\n\n      var pageHeight = page.scrollHeight;\n      var pageStopPortion = pageHeight / 2;\n      var viewHeight = window.innerHeight;\n\n      var viewEnd = nine.scrollStart + viewHeight;\n      var pageStartPart = viewEnd - pageStart;\n      var pageEndPart = (pageStart + pageHeight) - nine.scrollStart;\n\n      var canJumpDown = pageStartPart >= 0;\n      var stopJumpDown = pageStartPart > pageStopPortion;\n\n      var canJumpUp = pageEndPart >= 0;\n      var stopJumpUp = pageEndPart > pageStopPortion;\n\n      var scrollingForward = event.deltaY > 0;\n\n      if (  ( scrollingForward && canJumpDown && !stopJumpDown)\n         || (!scrollingForward && canJumpUp   && !stopJumpUp)) {\n        event.preventDefault();\n        nine.scrollTo(nine.scrollStart, pageStart);\n      }\n    } else {\n     event.preventDefault();\n    }\n  });\n}\n\n/* ==========================================================================\n  nine.scrollToPage()\n   ========================================================================== */\n\nnine.scrollToPage = (pageID) => {\n  // Get current scroll location and where the page starts\n  nine.scrollStart = nine.scrollContainer.scrollTop;\n  var pageStart = document.getElementById(pageID).offsetTop;\n  nine.scrollTo(nine.scrollStart, pageStart);\n}\n\n/* ==========================================================================\n  nine.keyboardNav()\n   ========================================================================== */\n\nnine.keyboardNav = () => {\n  console.log('here');\n\n  document.onkeydown = function(event) {\n    if (!event) {\n      event = window.event;\n    }\n\n    var code = event.keyCode;\n\n    if (event.charCode && code == 0) {\n      code = event.charCode;\n    }\n\n    switch(code) {\n      case 38: // Up\n        event.preventDefault();\n        nine.prevPage();\n        break;\n      case 40: // Down\n        event.preventDefault();\n        nine.nextPage();\n      break;\n    }\n\n  };\n\n}\n\n/* ==========================================================================\n  nine.nextPage()\n   ========================================================================== */\n\nnine.nextPage = () => {\n  if (nine.currentPage + 1 < nine.pages.length) {\n    nine.scrollDirection = \"down\";\n\n\n    var nextPage = nine.pages[nine.currentPage + 1].id;\n    nine.currentPage += 1;\n\n\n    nine.scrollToPage(nextPage);\n    nine.updateControls();\n    return true;\n  }\n  return false;\n}\n\n/* ==========================================================================\n  nine.prevPage()\n   ========================================================================== */\n\nnine.prevPage = () => {\n  if (nine.currentPage - 1 >= 0) {\n    nine.scrollDirection = \"up\";\n\n    nine.pages[nine.currentPage].classList.remove('fixed');\n    // nine.pages[nine.currentPage].style.setProperty('margin-top', `${nine.pages[nine.currentPage].getAttribute('data-offset')}px`);\n\n    var prevPage = nine.pages[nine.currentPage - 1].id;\n    nine.currentPage -= 1;\n\n    nine.scrollToPage(prevPage);\n    nine.updateControls();\n    return true;\n  }\n  return false;\n}\n\n/* ==========================================================================\n  nine.controls()\n   ========================================================================== */\n\nnine.controls = () => {\n  Array.prototype.forEach.call(nine.pages, function(el) {\n    document.querySelector('.dots').appendChild(document.createElement('li'));\n  });\n\n  document.querySelector('.dots li').classList.add('active')\n\n  document.querySelector('.next').addEventListener('click', () => nine.nextPage());\n  document.querySelector('.prev').addEventListener('click', () => nine.prevPage());\n\n  nine.updateControls();\n}\n\nnine.updateControls = () => {\n  document.querySelector('.dots li.active').classList.remove('active');\n  document.querySelectorAll('.dots li')[nine.currentPage].classList.add('active');\n\n  document.querySelector('.next').classList.remove('disabled');\n  document.querySelector('.prev').classList.remove('disabled');\n\n  if (nine.currentPage == 0) {\n    document.querySelector('.prev').classList.add('disabled');\n  }\n\n  if (nine.currentPage == nine.pages.length - 1) {\n    document.querySelector('.next').classList.add('disabled');\n  }\n}\n\n\n/* ==========================================================================\n  Document Load\n   ========================================================================== */\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  nine.scrollSpy();\n\n  //\n  // Array.prototype.forEach.call(nine.pages, function(el) {\n  //   new nine.scrollHandler(el.id);\n  // });\n\n  nine.keyboardNav();\n  nine.controls();\n\n\n  var i = 0;\n\n  Array.prototype.forEach.call(nine.pages, function(el, i) {\n    // el.setAttribute('data-offset', el.offsetTop);\n    // el.style.setProperty('top', `${el.getAttribute('data-offset')}px`);\n  });\n\n  nine.setFixed();\n});\n\nnine.setFixed = () => {\n\n  // set new current page to fixed.\n  // set offset on all further elemtns but not previous.\n  //\n  // if (nine.scrollDirection == \"up\") {\n  //   if (nine.currentPage + 1 < nine.pages.length) {\n  //     nine.pages[nine.currentPage + 1].style.setProperty('margin-top', `${nine.pages[nine.currentPage + 1].getAttribute('data-offset')}px`);\n  //   }\n  // } else {\n  //   console.log('here');\n  //   nine.pages[nine.currentPage].classList.add('fixed');\n  //   nine.pages[nine.currentPage].style.setProperty('margin-top', '0px');\n  //\n  //   if (nine.currentPage + 1 < nine.pages.length) {\n  //     nine.pages[nine.currentPage + 1].style.setProperty('margin-top', `${nine.pages[nine.currentPage + 1].getAttribute('data-offset')}px`);\n  //   }\n  // }\n\n\n\n  // Array.prototype.forEach.call(nine.pages, function(el, i) {\n  //   console.log(el);\n  //   console.log(el.getAttribute('data-offset'));\n  //   el.style.setProperty('top', `${el.getAttribute('data-offset')}px`);\n  // });\n  // nine.pages[nine.currentPage].style.setProperty('top', '0px');\n}\n\n\n/* ==========================================================================\n  Window Load\n   ========================================================================== */\n\nwindow.onload = () => {\n  nine.animateLoad();\n};\n"]}