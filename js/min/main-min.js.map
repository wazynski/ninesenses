{"version":3,"sources":["../main.js"],"names":["nine","canScroll","duration","scrollContainer","document","getElementById","scrollStart","pages","querySelectorAll","currentPage","scrollDirection","sticky","scrollListener","scrollSpy","sections","i","Array","prototype","forEach","call","el","classes","className","replace","trim","top","offsetTop","bottom","offsetHeight","height","addEventListener","event","scrollPosition","documentElement","scrollTop","includes","changeHeaderClass","parseInt","updateControls","querySelector","setAttribute","animateLoad","body","window","setTimeout","hidden","classList","remove","scrollTo","startLocation","endLocation","stopAnimationIfRequired","pos","cancelAnimationFrame","runAnimation","finishedScroll","distance","timeLapsed","percentage","position","easing","progress","animate","requestAnimationFrame","scrollHandler","pageId","page","pageStart","timeout","preventDefault","pageHeight","scrollHeight","pageStopPortion","viewHeight","innerHeight","viewEnd","pageStartPart","pageEndPart","canJumpDown","stopJumpDown","canJumpUp","stopJumpUp","scrollingForward","deltaY","scrollToPage","pageID","offset","keyboardNav","onkeydown","code","keyCode","charCode","prevPage","nextPage","calculateOffset","id","length","nextPageOffset","prevPageEl","prevPageOffsetBottom","currentPageOffset","controls","pageIndex","dot","createElement","appendChild","e","dotClick","add","target","getAttribute","gap","checkSticky","mStyle","style","cssText","indexOf","windowHeight","clientHeight","console","log","swipeScroll","animatePortrait","portrait","startPoint","offsetWidth","opacity","debounce","func","wait","immediate","context","this","args","arguments","later","apply","callNow","clearTimeout","checkStickyDebounced","onload"],"mappings":"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","file":"main-min.js","sourcesContent":["var nine = {\n  canScroll: true,\n  duration: 1000,\n  scrollContainer: document.getElementById('scroll'),\n  scrollStart: 0,\n  pages: document.querySelectorAll(\".section\"),\n  currentPage: 0,\n  scrollDirection: null,\n  sticky: false,\n  scrollListener: null,\n};\n\n/* ==========================================================================\n  nine.scrollSpy()\n========================================================================== */\n\nnine.scrollSpy = () => {\n  var sections = {};\n  var i = 0;\n\n  Array.prototype.forEach.call(nine.pages, function(el, i) {\n    sections[i] = {\n      classes: el.className.replace('section', '').trim(),\n      top: el.offsetTop,\n      bottom: el.offsetTop + el.offsetHeight,\n      height: el.offsetHeight,\n    }\n  });\n\n  nine.scrollContainer.addEventListener('scroll', function(event) {\n\n    var scrollPosition = document.documentElement.scrollTop || nine.scrollContainer.scrollTop;\n\n    for (i in sections) {\n      if (scrollPosition >= sections[i].top  && scrollPosition <= sections[i].bottom) {\n\n        if (sections[i].classes.includes('light')) {\n          nine.changeHeaderClass('dark');\n        } else {\n          nine.changeHeaderClass('light');\n        }\n      }\n\n      // Count as being in next page if 25% scrolled into it.\n      if ((scrollPosition >= sections[i].top - (sections[i].height * 0.75))  && scrollPosition <= sections[i].bottom) {\n        if (nine.currentPage != i) {\n          nine.currentPage = parseInt(i);\n          nine.updateControls();\n        }\n      }\n    }\n  });\n};\n\n/* ==========================================================================\n  nine.chnageHeaderClass\n   ========================================================================== */\n\nnine.changeHeaderClass = (className) => {\n  document.querySelector('.header').setAttribute('class', `header ${className}`);\n};\n\n/* ==========================================================================\n  nine.animatation()\n   ========================================================================== */\n\nnine.animateLoad = () => {\n  document.body.className = '';\n\n  window.setTimeout(() => {\n    var hidden = document.querySelectorAll(\".hide-left\");\n    Array.prototype.forEach.call(hidden, function(el, i) {\n      el.classList.remove('hide-left');\n    });\n\n    var hidden = document.querySelectorAll(\".hide-down\");\n    Array.prototype.forEach.call(hidden, function(el, i) {\n      el.classList.remove('hide-down');\n    });\n  }, 1000)\n};\n\n/* ==========================================================================\n  nine.scrollTo()\n  ========================================================================== */\n\nnine.scrollTo = (startLocation, endLocation) => {\n  nine.canScroll = false;\n\n  // Calculate how far to scroll\n  // var startLocation = viewStart;\n  // var endLocation = pageStart;\n  var distance = endLocation - startLocation;\n\n  var runAnimation;\n\n  // Set the animation variables to 0/undefined.\n  var timeLapsed = 0;\n  var percentage, position;\n\n  var easing = function (progress) {\n   return progress < 0.5 ? 4 * progress * progress * progress : (progress - 1) * (2 * progress - 2) * (2 * progress - 2) + 1; // acceleration until halfway, then deceleration\n  };\n\n  function stopAnimationIfRequired(pos) {\n   if (pos == endLocation) {\n     cancelAnimationFrame(runAnimation);\n     finishedScroll();\n   }\n  }\n\n  function finishedScroll() {\n    nine.canScroll = true;\n    nine.scrollDirection = null;\n  }\n\n  var animate = function () {\n   timeLapsed += 16;\n   percentage = timeLapsed / nine.duration;\n   if (percentage > 1) {\n     percentage = 1;\n     position = endLocation;\n   } else {\n     position = startLocation + distance * easing(percentage);\n   }\n   nine.scrollContainer.scrollTop = position;\n   runAnimation = requestAnimationFrame(animate);\n   stopAnimationIfRequired(position);\n  };\n\n  // Loop the animation function\n  runAnimation = requestAnimationFrame(animate);\n}\n\n/* ==========================================================================\n  nine.scrollHandler()\n  ========================================================================== */\n\n// Constructor cannot be ES6 arrow\nnine.scrollHandler = function(pageId) {\n  var page = document.getElementById(pageId);\n  var pageStart = page.offsetTop;\n  nine.canScroll = true;\n  var timeout = null;\n\n  nine.scrollListener = window.addEventListener('wheel', function(event) {\n    nine.scrollStart = nine.scrollContainer.scrollTop;\n\n    if (timeout !== null) {\n        event.preventDefault();\n        return false;\n    }\n\n    if (nine.canScroll) {\n      timeout = setTimeout(function(){ timeout = null; }, nine.duration * 3);\n\n      var pageHeight = page.scrollHeight;\n      var pageStopPortion = pageHeight / 2;\n      var viewHeight = window.innerHeight;\n\n      var viewEnd = nine.scrollStart + viewHeight;\n      var pageStartPart = viewEnd - pageStart;\n      var pageEndPart = (pageStart + pageHeight) - nine.scrollStart;\n\n      var canJumpDown = pageStartPart >= 0;\n      var stopJumpDown = pageStartPart > pageStopPortion;\n\n      var canJumpUp = pageEndPart >= 0;\n      var stopJumpUp = pageEndPart > pageStopPortion;\n\n      var scrollingForward = event.deltaY > 0;\n\n      if (  ( scrollingForward && canJumpDown && !stopJumpDown)\n         || (!scrollingForward && canJumpUp   && !stopJumpUp)) {\n        event.preventDefault();\n        nine.scrollTo(nine.scrollStart, pageStart);\n      }\n    } else {\n     event.preventDefault();\n    }\n  });\n}\n\n/* ==========================================================================\n  nine.scrollToPage()\n   ========================================================================== */\n\nnine.scrollToPage = (pageID, offset) => {\n  // Get current scroll location and where the page starts\n  nine.scrollStart = nine.scrollContainer.scrollTop;\n\n  if(typeof offset === \"undefined\") {\n    offset = 0;\n  }\n\n  var pageStart;\n\n  if (nine.scrollDirection === \"up\" && nine.sticky === true) {\n    pageStart = document.getElementById(pageID).offsetTop - document.getElementById(pageID).offsetHeight - offset;\n  } else {\n    pageStart = document.getElementById(pageID).offsetTop - offset;\n  }\n\n  nine.scrollTo(nine.scrollStart, pageStart);\n}\n\n/* ==========================================================================\n  nine.keyboardNav()\n   ========================================================================== */\n\nnine.keyboardNav = () => {\n  document.onkeydown = function(event) {\n    if (!event) {\n      event = window.event;\n    }\n\n    var code = event.keyCode;\n\n    if (event.charCode && code == 0) {\n      code = event.charCode;\n    }\n\n    switch(code) {\n      case 38: // Up\n        event.preventDefault();\n        nine.prevPage();\n        break;\n      case 40: // Down\n        event.preventDefault();\n        nine.nextPage();\n      break;\n    }\n\n  };\n}\n\n/* ==========================================================================\n  nine.calculateOffset()\n   ========================================================================== */\n\nnine.calculateOffset = () => {\n  var prevPage = nine.pages[nine.currentPage - 1].id;\n  var offset = 0;\n\n  // If user has manuall scrolled part way onto next one there will be an offset to account for.\n  if (nine.sticky) {\n     if (nine.currentPage + 1 < nine.pages.length) {\n       var nextPageOffset = document.getElementById(nine.pages[nine.currentPage + 1].id).offsetTop\n       var prevPageEl = document.getElementById(prevPage);\n       var prevPageOffsetBottom = prevPageEl.offsetTop + prevPageEl.offsetHeight;\n\n       if (nextPageOffset != prevPageOffsetBottom) {\n         offset = prevPageOffsetBottom - nextPageOffset;\n       }\n     } else {\n       var scrollPosition = document.documentElement.scrollTop || nine.scrollContainer.scrollTop;\n       var currentPageOffset = document.getElementById(nine.pages[nine.currentPage].id).offsetTop;\n\n       if (scrollPosition != currentPageOffset) {\n         offset = scrollPosition - currentPageOffset;\n       }\n     }\n     return offset;\n   } else {\n     return 0;\n   }\n};\n\n/* ==========================================================================\n  nine.nextPage()\n   ========================================================================== */\n\nnine.nextPage = () => {\n  if (nine.currentPage + 1 < nine.pages.length && nine.canScroll) {\n    nine.scrollDirection = 'down';\n    var nextPage = nine.pages[nine.currentPage + 1].id;\n\n    nine.scrollToPage(nextPage);\n    return true;\n  }\n  return false;\n}\n\n/* ==========================================================================\n  nine.prevPage()\n   ========================================================================== */\n\nnine.prevPage = () => {\n  if (nine.currentPage - 1 >= 0 && nine.canScroll) {\n    nine.scrollDirection = 'up';\n    var prevPage = nine.pages[nine.currentPage - 1].id;\n\n    nine.scrollToPage(prevPage, nine.calculateOffset());\n    return true;\n  }\n  return false;\n}\n\n\n/* ==========================================================================\n  nine.controls()\n   ========================================================================== */\n\nnine.controls = () => {\n  var pageIndex = 0;\n\n  Array.prototype.forEach.call(nine.pages, function(el) {\n    var dot = document.createElement('li');\n    dot.setAttribute('data-page', pageIndex);\n    document.querySelector('.dots').appendChild(dot);\n    dot.addEventListener('click', (e) => nine.dotClick(e));\n\n    pageIndex++;\n  });\n\n  document.querySelector('.dots li').classList.add('active')\n\n  document.querySelector('.next').addEventListener('click', () => nine.nextPage());\n  document.querySelector('.prev').addEventListener('click', () => nine.prevPage());\n\n  nine.updateControls();\n}\n\n/* ==========================================================================\n  nine.dotClick()\n   ========================================================================== */\n\nnine.dotClick = (e) => {\n  var pageIndex = e.target.getAttribute('data-page');\n  var pageId = nine.pages[pageIndex].id\n  var offset = 0;\n  if (pageIndex > nine.currentPage) {\n    nine.scrollDirection = 'down';\n  } else if (pageIndex < nine.currentPage) {\n    nine.scrollDirection = 'up';\n    if (nine.sticky) {\n      var gap = nine.currentPage - 1 - pageIndex;\n\n      for (var i = 1; i <= gap; i++) {\n        var id = nine.pages[nine.currentPage - i].id\n\n        offset += document.getElementById(id).offsetHeight;\n      }\n      offset += nine.calculateOffset();\n    }\n  }\n\n  nine.scrollToPage(pageId, offset);\n};\n\n/* ==========================================================================\n  nine.updateControls()\n   ========================================================================== */\n\nnine.updateControls = () => {\n  document.querySelector('.dots li.active').classList.remove('active');\n  document.querySelectorAll('.dots li')[nine.currentPage].classList.add('active');\n\n  document.querySelector('.next').classList.remove('disabled');\n  document.querySelector('.prev').classList.remove('disabled');\n\n  if (nine.currentPage == 0) {\n    document.querySelector('.prev').classList.add('disabled');\n  }\n\n  if (nine.currentPage == nine.pages.length - 1) {\n    document.querySelector('.next').classList.add('disabled');\n  }\n}\n\n/* ==========================================================================\n  nine.checkSticky() - http://trialstravails.blogspot.co.uk/2016/06/detecting-css-position-sticky-support.html\n   ========================================================================== */\n\nnine.checkSticky = () => {\n  // return false; // turn stick off\n  var el = document.createElement('a');\n  var mStyle = el.style;\n\n  mStyle.cssText = \"position:sticky;position:-webkit-sticky;position:-ms-sticky;\";\n  var sticky = mStyle.position.indexOf('sticky')!==-1;\n  var sections = document.querySelectorAll('.section');\n\n  var windowHeight = window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight;\n\n  if (sticky) {\n    sections.forEach(function(el) {\n      if (el.offsetHeight > windowHeight) {\n        sticky = false;\n      }\n    });\n  }\n\n  if (sticky) {\n    console.log('sticky supported');\n\n    sections.forEach(function(el) {\n      el.classList.add(\"sticky\");\n    });\n\n    // TODO: enable scroll swipe if sticky on\n    // nine.swipeScroll();\n\n    return true;\n  } else {\n    // TODO: disable scroll swipe if sticky off\n    // window.removeEventListener('wheel', nine.scrollListener);\n\n    sections.forEach(function(el) {\n      el.classList.remove(\"sticky\");\n    });\n\n    return false;\n  }\n}\n\n/* ==========================================================================\n  nine.swipeScroll()\n   ========================================================================== */\n\nnine.swipeScroll = () => {\n  Array.prototype.forEach.call(nine.pages, function(el) {\n    new nine.scrollHandler(el.id);\n  });\n}\n\n/* ==========================================================================\n  nine.animatePortrait()\n   ========================================================================== */\n\nnine.animatePortrait = () => {\n  var page = document.getElementById('two');\n  var offsetTop = page.offsetTop;\n  var portrait = document.querySelector('.portrait .faded');\n  var startPoint = 0.85;\n\n\n  nine.scrollContainer.addEventListener('scroll', function(event) {\n    var scrollPosition = document.documentElement.scrollTop || nine.scrollContainer.scrollTop;\n\n    if (page.offsetWidth > 1280) {\n      startPoint = 0.5;\n    } else if (page.offsetWidth < 1024) {\n      offsetTop = page.offsetHeight + document.getElementById('one').offsetHeight - portrait.offsetHeight;\n    }\n\n    if (scrollPosition > offsetTop * startPoint) {\n      if (portrait.style.opacity == 0) {\n        portrait.style.opacity = 1;\n      }\n    } else {\n      if (portrait.style.opacity == 1) {\n        portrait.style.opacity = 0;\n      }\n    }\n  });\n};\n\n/* ==========================================================================\n  nine.debounce()\n ========================================================================== */\n\nnine.debounce = (func, wait, immediate) => {\n\tvar timeout;\n\treturn function() {\n\t\tvar context = this, args = arguments;\n\t\tvar later = function() {\n\t\t\ttimeout = null;\n\t\t\tif (!immediate) func.apply(context, args);\n\t\t};\n\t\tvar callNow = immediate && !timeout;\n\t\tclearTimeout(timeout);\n\t\ttimeout = setTimeout(later, wait);\n\t\tif (callNow) func.apply(context, args);\n\t};\n};\n\n/* ==========================================================================\n  Document Load\n   ========================================================================== */\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  nine.scrollSpy();\n  nine.sticky = nine.checkSticky();\n  nine.keyboardNav();\n  nine.controls();\n\n  var checkStickyDebounced = nine.debounce(function() {\n  \tnine.sticky = nine.checkSticky();\n  }, 250);\n\n  window.addEventListener('resize', checkStickyDebounced);\n});\n\n/* ==========================================================================\n  Window Load\n   ========================================================================== */\n\nwindow.onload = () => {\n  nine.animateLoad();\n  nine.animatePortrait();\n};\n"]}