{"version":3,"sources":["../main.js"],"names":["nine","canScroll","duration","scrollContainer","document","getElementById","scrollStart","pages","querySelectorAll","currentPage","scrollDirection","sticky","scrollListener","String","prototype","includes","search","start","length","this","indexOf","scrollSpy","sections","i","Array","forEach","call","el","classes","className","replace","trim","top","offsetTop","bottom","offsetHeight","height","addEventListener","scrollPosition","documentElement","scrollTop","changeHeaderClass","parseInt","updateControls","scrollTo","startLocation","endLocation","stopAnimationIfRequired","pos","cancelAnimationFrame","runAnimation","finishedScroll","percentage","position","distance","timeLapsed","easing","progress","animate","requestAnimationFrame","scrollHandler","pageId","page","pageStart","timeout","window","event","console","log","preventDefault","setTimeout","pageHeight","scrollHeight","pageStopPortion","viewHeight","innerHeight","viewEnd","pageStartPart","pageEndPart","canJumpDown","stopJumpDown","canJumpUp","stopJumpUp","scrollingForward","deltaY","scrollToPage","pageID","offset","keyboardNav","onkeydown","code","keyCode","charCode","prevPage","nextPage","calculateOffset","id","nextPageOffset","prevPageEl","prevPageOffsetBottom","currentPageOffset","controls","pageIndex","dots","querySelector","dot","createElement","setAttribute","appendChild","e","dotClick","classList","add","target","getAttribute","gap","remove","checkSticky","mStyle","style","cssText","windowHeight","windowSize","h","body","swipeScroll","animateLoad","masonaryHeight","hidden","animatePortrait","portrait","startPoint","portraitChange","w","opacity","debounce","func","wait","immediate","context","args","arguments","later","apply","callNow","clearTimeout","pageTransisition","href","bg","backgroundColor","location","masonary","lheight","rheight","lblocks","rblocks","animateLinks","anchorElements","getElementsByTagName","onclick","innerWidth","d","compatMode","clientWidth","clientHeight","checkStickyDebounced","onload"],"mappings":"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","file":"main-min.js","sourcesContent":["var nine = {\n  canScroll: true,\n  duration: 500,\n  scrollContainer: document.getElementById('scroll'),\n  scrollStart: 0,\n  pages: document.querySelectorAll(\".section\"),\n  currentPage: 0,\n  scrollDirection: null,\n  sticky: false,\n  scrollListener: null,\n};\n\n/* ==========================================================================\n    Polyfils\n   ========================================================================== */\n\nif (!String.prototype.includes) {\n   String.prototype.includes = function(search, start) {\n     if (typeof start !== 'number') {\n       start = 0;\n     }\n\n     if (start + search.length > this.length) {\n       return false;\n     } else {\n       return this.indexOf(search, start) !== -1;\n     }\n   };\n }\n\n/* ==========================================================================\n  nine.scrollSpy()\n========================================================================== */\n\nnine.scrollSpy = () => {\n  var sections = {};\n  var i = 0;\n\n  Array.prototype.forEach.call(nine.pages, function(el, i) {\n    sections[i] = {\n      classes: el.className.replace('section', '').trim(),\n      top: el.offsetTop,\n      bottom: el.offsetTop + el.offsetHeight,\n      height: el.offsetHeight,\n    }\n  });\n\n  nine.scrollContainer.addEventListener('scroll', function(event) {\n\n    var scrollPosition = document.documentElement.scrollTop || nine.scrollContainer.scrollTop;\n\n    for (i in sections) {\n      if (scrollPosition >= sections[i].top  && scrollPosition <= sections[i].bottom) {\n\n        if (sections[i].classes.includes('light')) {\n          nine.changeHeaderClass('dark');\n        } else {\n          nine.changeHeaderClass('light');\n        }\n      }\n\n      // Count as being in next page if 25% scrolled into it.\n      var scrollOffset = 0.75;\n\n      if ((scrollPosition >= sections[i].top - (sections[i].height * scrollOffset))  && scrollPosition <= sections[i].bottom) {\n        if (nine.currentPage != i) {\n          nine.currentPage = parseInt(i);\n          nine.updateControls();\n        }\n      }\n    }\n  });\n};\n\n/* ==========================================================================\n  nine.scrollTo()\n  ========================================================================== */\n\nnine.scrollTo = (startLocation, endLocation) => {\n  nine.canScroll = false;\n\n  // Calculate how far to scroll\n  // var startLocation = viewStart;\n  // var endLocation = pageStart;\n  var distance = endLocation - startLocation;\n\n  var runAnimation;\n\n  // Set the animation variables to 0/undefined.\n  var timeLapsed = 0;\n  var percentage, position;\n\n  var easing = function (progress) {\n   return progress < 0.5 ? 4 * progress * progress * progress : (progress - 1) * (2 * progress - 2) * (2 * progress - 2) + 1; // acceleration until halfway, then deceleration\n  };\n\n  function stopAnimationIfRequired(pos) {\n   if (pos == endLocation) {\n     cancelAnimationFrame(runAnimation);\n     finishedScroll();\n   }\n  }\n\n  function finishedScroll() {\n    nine.canScroll = true;\n    nine.scrollDirection = null;\n  }\n\n  var animate = function () {\n   timeLapsed += 16;\n   percentage = timeLapsed / nine.duration;\n   if (percentage > 1) {\n     percentage = 1;\n     position = endLocation;\n   } else {\n     position = startLocation + distance * easing(percentage);\n   }\n   nine.scrollContainer.scrollTop = position;\n   runAnimation = requestAnimationFrame(animate);\n   stopAnimationIfRequired(position);\n  };\n\n  // Loop the animation function\n  runAnimation = requestAnimationFrame(animate);\n}\n\n/* ==========================================================================\n  nine.scrollHandler()\n  ========================================================================== */\n\n// Constructor cannot be ES6 arrow\nnine.scrollHandler = function(pageId) {\n  var page = document.getElementById(pageId);\n  var pageStart = page.offsetTop;\n  nine.canScroll = true;\n  var timeout = null;\n\n  nine.scrollListener = window.addEventListener('wheel', function(event) {\n    nine.scrollStart = nine.scrollContainer.scrollTop;\n\n    if (timeout !== null) {\n      console.log('stop');\n        event.preventDefault();\n        return false;\n    }\n\n    if (nine.canScroll) {\n      timeout = setTimeout(function(){ timeout = null; }, nine.duration * 3);\n\n      var pageHeight = page.scrollHeight;\n      var pageStopPortion = pageHeight / 2;\n      var viewHeight = window.innerHeight;\n\n      var viewEnd = nine.scrollStart + viewHeight;\n      var pageStartPart = viewEnd - pageStart;\n      var pageEndPart = (pageStart + pageHeight) - nine.scrollStart;\n\n      var canJumpDown = pageStartPart >= 0;\n      var stopJumpDown = pageStartPart > pageStopPortion;\n\n      var canJumpUp = pageEndPart >= 0;\n      var stopJumpUp = pageEndPart > pageStopPortion;\n\n      var scrollingForward = event.deltaY > 0;\n\n      if (  ( scrollingForward && canJumpDown && !stopJumpDown)\n         || (!scrollingForward && canJumpUp   && !stopJumpUp)) {\n        event.preventDefault();\n        nine.scrollTo(nine.scrollStart, pageStart);\n      }\n    } else {\n     event.preventDefault();\n    }\n  });\n}\n\n/* ==========================================================================\n  nine.scrollToPage()\n   ========================================================================== */\n\nnine.scrollToPage = (pageID, offset) => {\n  // Get current scroll location and where the page starts\n  nine.scrollStart = nine.scrollContainer.scrollTop;\n\n  if (typeof offset === \"undefined\") {\n    offset = 0;\n  }\n\n  var pageStart;\n\n  if (nine.scrollDirection === \"up\" && nine.sticky === true) {\n    pageStart = document.getElementById(pageID).offsetTop - document.getElementById(pageID).offsetHeight - offset;\n  } else {\n    pageStart = document.getElementById(pageID).offsetTop - offset;\n  }\n\n  nine.scrollTo(nine.scrollStart, pageStart);\n}\n\n/* ==========================================================================\n  nine.keyboardNav()\n   ========================================================================== */\n\nnine.keyboardNav = () => {\n  document.onkeydown = function(event) {\n    if (!event) {\n      event = window.event;\n    }\n\n    var code = event.keyCode;\n\n    if (event.charCode && code == 0) {\n      code = event.charCode;\n    }\n\n    switch(code) {\n      case 38: // Up\n        event.preventDefault();\n        nine.prevPage();\n        break;\n      case 40: // Down\n        event.preventDefault();\n        nine.nextPage();\n      break;\n    }\n\n  };\n}\n\n/* ==========================================================================\n  nine.calculateOffset()\n   ========================================================================== */\n\nnine.calculateOffset = () => {\n  var prevPage = nine.pages[nine.currentPage - 1].id;\n  var offset = 0;\n\n  // If user has manuall scrolled part way onto next one there will be an offset to account for.\n  if (nine.sticky) {\n     if (nine.currentPage + 1 < nine.pages.length) {\n       var nextPageOffset = document.getElementById(nine.pages[nine.currentPage + 1].id).offsetTop\n       var prevPageEl = document.getElementById(prevPage);\n       var prevPageOffsetBottom = prevPageEl.offsetTop + prevPageEl.offsetHeight;\n\n       if (nextPageOffset != prevPageOffsetBottom) {\n         offset = prevPageOffsetBottom - nextPageOffset;\n       }\n     } else {\n       var scrollPosition = document.documentElement.scrollTop || nine.scrollContainer.scrollTop;\n       var currentPageOffset = document.getElementById(nine.pages[nine.currentPage].id).offsetTop;\n\n       if (scrollPosition != currentPageOffset) {\n         offset = scrollPosition - currentPageOffset;\n       }\n     }\n     return offset;\n   } else {\n     return 0;\n   }\n};\n\n/* ==========================================================================\n  nine.nextPage()\n   ========================================================================== */\n\nnine.nextPage = () => {\n  if (nine.currentPage + 1 < nine.pages.length && nine.canScroll) {\n    nine.scrollDirection = 'down';\n    var nextPage = nine.pages[nine.currentPage + 1].id;\n\n    nine.scrollToPage(nextPage);\n    return true;\n  }\n  return false;\n}\n\n/* ==========================================================================\n  nine.prevPage()\n   ========================================================================== */\n\nnine.prevPage = () => {\n  if (nine.currentPage - 1 >= 0 && nine.canScroll) {\n    nine.scrollDirection = 'up';\n    var prevPage = nine.pages[nine.currentPage - 1].id;\n\n    nine.scrollToPage(prevPage, nine.calculateOffset());\n    return true;\n  }\n  return false;\n}\n\n\n/* ==========================================================================\n  nine.controls()\n   ========================================================================== */\n\nnine.controls = () => {\n  var pageIndex = 0;\n\n  var dots = document.querySelector('.dots')\n  if (dots) {\n    Array.prototype.forEach.call(nine.pages, function(el) {\n      var dot = document.createElement('li');\n      dot.setAttribute('data-page', pageIndex);\n      dots.appendChild(dot);\n      dot.addEventListener('click', (e) => nine.dotClick(e));\n\n      pageIndex++;\n    });\n\n    document.querySelector('.dots li').classList.add('active')\n\n    document.querySelector('.next').addEventListener('click', () => nine.nextPage());\n    document.querySelector('.prev').addEventListener('click', () => nine.prevPage());\n\n    nine.updateControls();\n  }\n}\n\n/* ==========================================================================\n  nine.dotClick()\n   ========================================================================== */\n\nnine.dotClick = (e) => {\n  var pageIndex = e.target.getAttribute('data-page');\n  var pageId = nine.pages[pageIndex].id\n  var offset = 0;\n  if (pageIndex > nine.currentPage) {\n    nine.scrollDirection = 'down';\n  } else if (pageIndex < nine.currentPage) {\n    nine.scrollDirection = 'up';\n    if (nine.sticky) {\n      var gap = nine.currentPage - 1 - pageIndex;\n\n      for (var i = 1; i <= gap; i++) {\n        var id = nine.pages[nine.currentPage - i].id\n\n        offset += document.getElementById(id).offsetHeight;\n      }\n      offset += nine.calculateOffset();\n    }\n  }\n\n  nine.scrollToPage(pageId, offset);\n};\n\n/* ==========================================================================\n  nine.updateControls()\n   ========================================================================== */\n\nnine.updateControls = () => {\n  document.querySelector('.dots li.active').classList.remove('active');\n  document.querySelectorAll('.dots li')[nine.currentPage].classList.add('active');\n\n  document.querySelector('.next').classList.remove('disabled');\n  document.querySelector('.prev').classList.remove('disabled');\n\n  if (nine.currentPage == 0) {\n    document.querySelector('.prev').classList.add('disabled');\n  }\n\n  if (nine.currentPage == nine.pages.length - 1) {\n    document.querySelector('.next').classList.add('disabled');\n  }\n}\n\n/* ==========================================================================\n  nine.checkSticky() - http://trialstravails.blogspot.co.uk/2016/06/detecting-css-position-sticky-support.html\n   ========================================================================== */\n\nnine.checkSticky = () => {\n  console.log('Checking Sticky');\n  // return false; // turn stick off\n  var el = document.createElement('a');\n  var mStyle = el.style;\n\n  mStyle.cssText = \"position:sticky;position:-webkit-sticky;position:-ms-sticky;\";\n  var sticky = mStyle.position.indexOf('sticky')!==-1;\n  var sections = document.querySelectorAll('.section');\n\n  var windowHeight = nine.windowSize().h;\n\n  if (sticky) {\n    sections.forEach(function(el) {\n      if (el.offsetHeight > windowHeight) {\n        sticky = false;\n      }\n    });\n  }\n\n  if (sticky) {\n    document.body.classList.add(\"sticky-enabled\");\n\n    // TODO: enable scroll swipe if sticky on\n    // nine.swipeScroll();\n\n    return true;\n  } else {\n    document.body.classList.remove(\"sticky-enabled\");\n\n    // TODO: disable scroll swipe if sticky off\n    // window.removeEventListener('wheel', nine.scrollListener);\n\n    return false;\n  }\n}\n\n/* ==========================================================================\n  nine.swipeScroll()\n   ========================================================================== */\n\nnine.swipeScroll = () => {\n  Array.prototype.forEach.call(nine.pages, function(el) {\n    new nine.scrollHandler(el.id);\n  });\n}\n\n/* ==========================================================================\n  nine.changeHeaderClass\n   ========================================================================== */\n\nnine.changeHeaderClass = (className) => {\n  document.querySelector('.header').setAttribute('class', `header ${className}`);\n};\n\n/* ==========================================================================\n  nine.animatation()\n   ========================================================================== */\n\nnine.animateLoad = () => {\n  window.setTimeout(() => {\n    document.body.classList.add('faded-in');\n    nine.masonaryHeight();\n\n    window.setTimeout(() => {\n      var hidden = document.querySelectorAll(\".hide-left\");\n      Array.prototype.forEach.call(hidden, function(el, i) {\n        el.classList.remove('hide-left');\n      });\n\n      var hidden = document.querySelectorAll(\".hide-down\");\n      Array.prototype.forEach.call(hidden, function(el, i) {\n        el.classList.remove('hide-down');\n      });\n    }, 1000)\n  }, 1000);\n};\n\n/* ==========================================================================\n  nine.animatePortrait()\n   ========================================================================== */\n\nnine.animatePortrait = () => {\n  var page = document.getElementById('two');\n  var offsetTop = page.offsetTop;\n  var portrait = document.querySelector('.portrait .faded');\n  var startPoint = 0.98;\n\n  if (portrait) {\n    function portraitChange() {\n      var scrollPosition = document.documentElement.scrollTop || nine.scrollContainer.scrollTop;\n\n      if (nine.windowSize().w > 1280) {\n        startPoint = 0.5;\n      } else if (nine.windowSize().w < 1024) {\n        offsetTop = page.offsetHeight + document.getElementById('one').offsetHeight - portrait.offsetHeight;\n      }\n\n      if (scrollPosition > offsetTop * startPoint) {\n        if (portrait.style.opacity == 0) {\n          portrait.style.opacity = 1;\n        }\n      } else {\n        if (portrait.style.opacity == 1) {\n          portrait.style.opacity = 0;\n        }\n      }\n    }\n\n    nine.scrollContainer.addEventListener('scroll', function(event) {\n      portraitChange();\n    });\n  }\n};\n\n/* ==========================================================================\n  nine.debounce()\n ========================================================================== */\n\nnine.debounce = (func, wait, immediate) => {\n\tvar timeout;\n\treturn function() {\n\t\tvar context = this, args = arguments;\n\t\tvar later = function() {\n\t\t\ttimeout = null;\n\t\t\tif (!immediate) func.apply(context, args);\n\t\t};\n\t\tvar callNow = immediate && !timeout;\n\t\tclearTimeout(timeout);\n\t\ttimeout = setTimeout(later, wait);\n\t\tif (callNow) func.apply(context, args);\n\t};\n};\n\n\nnine.pageTransisition = (href, bg, slide) => {\n  if (!bg) {\n    bg = '#E6E6E4';\n  }\n\n  document.body.style.backgroundColor = bg;\n\n  // if (slide) {\n  //   if (slide == \"left\") {\n  //     document.body.classList.add('slide-left');\n  //   } else {\n  //     document.body.classList.add('slide-right');\n  //   }\n  // } else {\n  document.body.classList.add('faded-out');\n  // }\n\n  setTimeout(function(){\n    window.location.href = href;\n  }, 600);\n};\n\n/* ==========================================================================\n  nine.aboutHeight\n   ========================================================================== */\n\nnine.masonaryHeight = () => {\n  var masonary = document.querySelector('.masonary')\n  let lheight = 0;\n  let rheight = 0;\n  if (masonary) {\n    if (nine.windowSize().w >= 1024) {\n      var lblocks = document.querySelectorAll('.block.left');\n      var rblocks = document.querySelectorAll('.block.right');\n\n      Array.prototype.forEach.call(lblocks, function(el, i) {\n        lheight += el.offsetHeight;\n      });\n\n      Array.prototype.forEach.call(rblocks, function(el, i) {\n        rheight += el.offsetHeight;\n      });\n\n      let height;\n\n      if (lheight >= rheight) {\n        height = lheight;\n      } else {\n        height = rheight;\n      }\n\n      height += 100;\n      masonary.style.height = height + 'px';\n    } else {\n      masonary.style.height = 'auto';\n    }\n  }\n};\n\n/* ==========================================================================\n  nine.animateLinks\n   ========================================================================== */\n\nnine.animateLinks = () => {\n  var anchorElements = document.getElementsByTagName('a');\n  Array.prototype.forEach.call(anchorElements, function(el, i) {\n    el.onclick = function() {\n      nine.pageTransisition(this.href, el.getAttribute('data-bg'), el.getAttribute('data-slide'));\n      return false;\n    }\n  });\n};\n\n/* ==========================================================================\n  nine.windowWidth\n   ========================================================================== */\n\nnine.windowSize = (w) => {\n\n  // Use the specified window or the current window if no argument\n  w = w || window;\n\n  // This works for all browsers except IE8 and before\n  if (w.innerWidth != null) return { w: w.innerWidth, h: w.innerHeight };\n\n  // For IE (or any browser) in Standards mode\n  var d = w.document;\n  if (document.compatMode == \"CSS1Compat\")\n      return { w: d.documentElement.clientWidth,\n         h: d.documentElement.clientHeight };\n\n  // For browsers in Quirks mode\n  return { w: d.body.clientWidth, h: d.body.clientHeight };\n};\n\n/* ==========================================================================\n  Document Load\n   ========================================================================== */\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  nine.scrollSpy();\n  nine.sticky = nine.checkSticky();\n  nine.keyboardNav();\n  nine.controls();\n  nine.masonaryHeight();\n  nine.animateLinks();\n\n  var checkStickyDebounced = nine.debounce(function() {\n  \tnine.sticky = nine.checkSticky();\n  }, 250);\n\n  window.addEventListener('resize', checkStickyDebounced);\n\n  window.addEventListener('resize', function() {\n    nine.masonaryHeight();\n  });\n});\n\n/* ==========================================================================\n  Window Load\n   ========================================================================== */\n\nwindow.onload = () => {\n  nine.animateLoad();\n  nine.animatePortrait();\n  nine.masonaryHeight();\n};\n"]}