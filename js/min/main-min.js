"use strict";var nine={canScroll:!0,duration:1e3,scrollContainer:document.getElementById("scroll"),scrollStart:0,pages:document.querySelectorAll(".section"),currentPage:0,scrollDirection:null,sticky:!1,scrollListener:null};String.prototype.includes||(String.prototype.includes=function(e,n){return"number"!=typeof n&&(n=0),!(n+e.length>this.length)&&-1!==this.indexOf(e,n)}),nine.scrollSpy=function(){var e={},n=0;Array.prototype.forEach.call(nine.pages,function(n,t){e[t]={classes:n.className.replace("section","").trim(),top:n.offsetTop,bottom:n.offsetTop+n.offsetHeight,height:n.offsetHeight}}),nine.scrollContainer.addEventListener("scroll",function(){var t=document.documentElement.scrollTop||nine.scrollContainer.scrollTop;for(n in e){t>=e[n].top&&t<=e[n].bottom&&(e[n].classes.includes("light")?nine.changeHeaderClass("dark"):nine.changeHeaderClass("light"));t>=e[n].top-.75*e[n].height&&t<=e[n].bottom&&nine.currentPage!=n&&(nine.currentPage=parseInt(n),nine.updateControls())}})},nine.changeHeaderClass=function(e){document.querySelector(".header").setAttribute("class","header "+e)},nine.animateLoad=function(){window.setTimeout(function(){document.body.classList.add("faded-in"),nine.masonaryHeight(),window.setTimeout(function(){var e=document.querySelectorAll(".hide-left");Array.prototype.forEach.call(e,function(e){e.classList.remove("hide-left")});var e=document.querySelectorAll(".hide-down");Array.prototype.forEach.call(e,function(e){e.classList.remove("hide-down")})},1e3)},1e3)},nine.scrollTo=function(e,n){function t(e){e==n&&(cancelAnimationFrame(o),i())}function i(){nine.canScroll=!0,nine.scrollDirection=null}nine.canScroll=!1;var o,r,c,l=n-e,a=0,s=function(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},u=function i(){a+=16,r=a/nine.duration,r>1?(r=1,c=n):c=e+l*s(r),nine.scrollContainer.scrollTop=c,o=requestAnimationFrame(i),t(c)};o=requestAnimationFrame(u)},nine.scrollHandler=function(e){var n=document.getElementById(e),t=n.offsetTop;nine.canScroll=!0;var i=null;nine.scrollListener=window.addEventListener("wheel",function(e){if(nine.scrollStart=nine.scrollContainer.scrollTop,null!==i)return e.preventDefault(),!1;if(nine.canScroll){i=setTimeout(function(){i=null},3*nine.duration);var o=n.scrollHeight,r=o/2,c=window.innerHeight,l=nine.scrollStart+c,a=l-t,s=t+o-nine.scrollStart,u=a>=0,d=a>r,f=s>=0,m=s>r,g=e.deltaY>0;(g&&u&&!d||!g&&f&&!m)&&(e.preventDefault(),nine.scrollTo(nine.scrollStart,t))}else e.preventDefault()})},nine.scrollToPage=function(e,n){nine.scrollStart=nine.scrollContainer.scrollTop,void 0===n&&(n=0);var t;t="up"===nine.scrollDirection&&!0===nine.sticky?document.getElementById(e).offsetTop-document.getElementById(e).offsetHeight-n:document.getElementById(e).offsetTop-n,nine.scrollTo(nine.scrollStart,t)},nine.keyboardNav=function(){document.onkeydown=function(e){e||(e=window.event);var n=e.keyCode;switch(e.charCode&&0==n&&(n=e.charCode),n){case 38:e.preventDefault(),nine.prevPage();break;case 40:e.preventDefault(),nine.nextPage()}}},nine.calculateOffset=function(){var e=nine.pages[nine.currentPage-1].id,n=0;if(nine.sticky){if(nine.currentPage+1<nine.pages.length){var t=document.getElementById(nine.pages[nine.currentPage+1].id).offsetTop,i=document.getElementById(e),o=i.offsetTop+i.offsetHeight;t!=o&&(n=o-t)}else{var r=document.documentElement.scrollTop||nine.scrollContainer.scrollTop,c=document.getElementById(nine.pages[nine.currentPage].id).offsetTop;r!=c&&(n=r-c)}return n}return 0},nine.nextPage=function(){if(nine.currentPage+1<nine.pages.length&&nine.canScroll){nine.scrollDirection="down";var e=nine.pages[nine.currentPage+1].id;return nine.scrollToPage(e),!0}return!1},nine.prevPage=function(){if(nine.currentPage-1>=0&&nine.canScroll){nine.scrollDirection="up";var e=nine.pages[nine.currentPage-1].id;return nine.scrollToPage(e,nine.calculateOffset()),!0}return!1},nine.controls=function(){var e=0,n=document.querySelector(".dots");n&&(Array.prototype.forEach.call(nine.pages,function(){var t=document.createElement("li");t.setAttribute("data-page",e),n.appendChild(t),t.addEventListener("click",function(e){return nine.dotClick(e)}),e++}),document.querySelector(".dots li").classList.add("active"),document.querySelector(".next").addEventListener("click",function(){return nine.nextPage()}),document.querySelector(".prev").addEventListener("click",function(){return nine.prevPage()}),nine.updateControls())},nine.dotClick=function(e){var n=e.target.getAttribute("data-page"),t=nine.pages[n].id,i=0;if(n>nine.currentPage)nine.scrollDirection="down";else if(n<nine.currentPage&&(nine.scrollDirection="up",nine.sticky)){for(var o=nine.currentPage-1-n,r=1;r<=o;r++){var c=nine.pages[nine.currentPage-r].id;i+=document.getElementById(c).offsetHeight}i+=nine.calculateOffset()}nine.scrollToPage(t,i)},nine.updateControls=function(){document.querySelector(".dots li.active").classList.remove("active"),document.querySelectorAll(".dots li")[nine.currentPage].classList.add("active"),document.querySelector(".next").classList.remove("disabled"),document.querySelector(".prev").classList.remove("disabled"),0==nine.currentPage&&document.querySelector(".prev").classList.add("disabled"),nine.currentPage==nine.pages.length-1&&document.querySelector(".next").classList.add("disabled")},nine.checkSticky=function(){var e=document.createElement("a"),n=e.style;n.cssText="position:sticky;position:-webkit-sticky;position:-ms-sticky;";var t=-1!==n.position.indexOf("sticky"),i=document.querySelectorAll(".section"),o=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;return t&&i.forEach(function(e){e.offsetHeight>o&&(t=!1)}),!!t&&(document.body.classList.add("sticky-enabled"),!0)},nine.swipeScroll=function(){Array.prototype.forEach.call(nine.pages,function(e){new nine.scrollHandler(e.id)})},nine.animatePortrait=function(){var e=document.getElementById("two"),n=e.offsetTop,t=document.querySelector(".portrait .faded"),i=.98;if(t){var o=function(){var o=document.documentElement.scrollTop||nine.scrollContainer.scrollTop;nine.windowSize().w>1280?i=.5:nine.windowSize().w<1024&&(n=e.offsetHeight+document.getElementById("one").offsetHeight-t.offsetHeight),o>n*i?0==t.style.opacity&&(t.style.opacity=1):1==t.style.opacity&&(t.style.opacity=0)};nine.scrollContainer.addEventListener("scroll",function(){o()})}},nine.debounce=function(e,n,t){var i;return function(){var o=this,r=arguments,c=function(){i=null,t||e.apply(o,r)},l=t&&!i;clearTimeout(i),i=setTimeout(c,n),l&&e.apply(o,r)}},nine.pageTransisition=function(e,n){n||(n="#E6E6E4"),document.body.style.backgroundColor=n,document.body.classList.add("faded-out"),setTimeout(function(){window.location.href=e},600)},nine.masonaryHeight=function(){var e=document.querySelector(".masonary"),n=0,t=0;if(e)if(nine.windowSize().w>=1024){var i=document.querySelectorAll(".block.left"),o=document.querySelectorAll(".block.right");Array.prototype.forEach.call(i,function(e){n+=e.offsetHeight}),Array.prototype.forEach.call(o,function(e){t+=e.offsetHeight});var r=void 0;r=n>=t?n:t,r+=100,e.style.height=r+"px"}else e.style.height="auto"},nine.animateLinks=function(){var e=document.getElementsByTagName("a");Array.prototype.forEach.call(e,function(e){e.onclick=function(){return nine.pageTransisition(this.href,e.getAttribute("data-bg"),e.getAttribute("data-slide")),!1}})},nine.windowSize=function(e){if(e=e||window,null!=e.innerWidth)return{w:e.innerWidth,h:e.innerHeight};var n=e.document;return"CSS1Compat"==document.compatMode?{w:n.documentElement.clientWidth,h:n.documentElement.clientHeight}:{w:n.body.clientWidth,h:n.body.clientHeight}},document.addEventListener("DOMContentLoaded",function(){nine.scrollSpy(),nine.sticky=nine.checkSticky(),nine.keyboardNav(),nine.controls(),nine.masonaryHeight(),nine.animateLinks();var e=nine.debounce(function(){nine.sticky=nine.checkSticky()},250);window.addEventListener("resize",e),window.addEventListener("resize",function(){nine.masonaryHeight()})}),window.onload=function(){nine.animateLoad(),nine.animatePortrait(),nine.masonaryHeight()};
//# sourceMappingURL=./main-min.js.map